# predictDir=$HOME/Documents/GitHub/NpDeployPackage
predictDir=../predictkm
model=$2
tmpdir=`mktemp -d -t predict-XXXXXXXX`
input=$tmpdir/predictInput.json
output=$tmpdir/predictOutput.json
error=$tmpdir/predictError

# Models: RandomForestRegressor, Lasso, BayesianRidge
# Questions: NpQFinalCost1, NpQFinalCost2, NpQFinalCostTimeSeries1, NpQFinalCostTimeSeries2
echo $1 > $input
python3 $predictDir/NpDeploy/NpPredictModel.py -i $input -o $output -p $predictDir -d $model -m Lasso -q NpQFinalCost1 -r False -c Visbo > $error 2>&1

if [ $? -ne 0 ]
then
  echo "FATAL: PredictBAC failed" 1>&2
  cat $error 1>&2
  rm -rf $tmpdir
  exit 1
fi
echo "" >>$output
cat <$output
rm -rf $tmpdir
