# predictDir=$HOME/Documents/GitHub/NpDeployPackage
predictDir=../predictkm
tmpdir=`mktemp -d -t predict-XXXXXXXX`
input=$1
model=$2
validation=$predictDir/NpData/Visbo/ValidationData.json
output=$tmpdir/predictTrainingOutput.json
error=$tmpdir/predictTrainingError

# echo python3 $predictDir/NpDeploy/NpIncrementModels.py -i $input -p $predictDir -v $validation -d $model -q NpQFinalCost1 -c Visbo
python3 $predictDir/NpDeploy/NpIncrementModels.py -i $input -p $predictDir -v $validation -d $model -q NpQFinalCost1 -c Visbo > $output 2> $error \
&& python3 $predictDir/NpDeploy/NpIncrementModels.py -i $input -p $predictDir -v $validation -d $model -q NpQFinalCost2 -c Visbo >> $output 2>> $error \
&& python3 $predictDir/NpDeploy/NpIncrementModels.py -i $input -p $predictDir -v $validation -d $model -q NpQFinalCostTimeSeries1 -c Visbo >> $output 2>> $error  \
&& python3 $predictDir/NpDeploy/NpIncrementModels.py -i $input -p $predictDir -v $validation -d $model -q NpQFinalCostTimeSeries2 -c Visbo >> $output 2>> $error

if [ $? -ne 0 ]
then
  echo "FATAL: PredictBACTraining failed" 1>&2
  cat $error 1>&2
  rm -rf $tmpdir
  exit 1
fi
# echo "" >>$output
cat <$output
rm -rf $tmpdir
